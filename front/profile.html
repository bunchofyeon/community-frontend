<!-- profile.html -->
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>프로필 수정 · Community</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <link rel="stylesheet" href="styles/style.css" />
  <style>
    .profile-image-block {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }
    .profile-image-block img {
      width: 88px;
      height: 88px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid var(--line);
      background: #f5f5f5;
    }
  </style>
</head>
<body>
  <script type="module">
    import { loadLayout } from './scripts/layout.js';
    import { renderHeader } from './scripts/common.js';
    loadLayout().then(() => renderHeader());
  </script>

  <div id="app-header"></div>

  <main class="container page-padding">
    <div class="form-wrap" style="max-width:560px;margin:0 auto;">
      <div class="card shadow-sm">
        <div class="card-body">
          <h1 class="h4 mb-16">프로필 수정</h1>

          <!-- 프로필 이미지 -->
          <section class="mb-16">
            <h2 class="h6 mb-8">프로필 이미지</h2>
            <div class="profile-image-block">
              <img
                id="profileImagePreview"
                src="./assets/img/comong.png"
                alt="프로필 이미지 미리보기"
              />
              <div>
                <input
                  id="profileImageFile"
                  type="file"
                  accept="image/*"
                  class="form-control"
                />
                <div class="form-hint">
                  새 이미지를 선택하면 <b>미리보기만</b> 바뀌고,
                  아래 <b>이미지 저장</b> 버튼을 눌러야 서버에 반영됩니다.
                </div>
                <button
                  type="button"
                  class="btn btn-accent"
                  id="profileImageSaveBtn"
                  style="margin-top:8px;"
                >
                  이미지 저장
                </button>
                <button
                  type="button"
                  class="btn btn-light"
                  id="profileImageDeleteBtn"
                  style="margin-top:8px;margin-left:8px;"
                >
                  프로필 이미지 삭제
                </button>
              </div>
            </div>
          </section>

          <!-- 닉네임 / 비밀번호 수정 폼 -->
          <form id="profileForm" novalidate>
            <div class="mb-12">
              <label for="nickname" class="form-label">닉네임</label>
              <input id="nickname" type="text" class="form-control" placeholder="새 닉네임" maxlength="20" />
            </div>

            <div class="actions" style="display:flex;gap:8px;justify-content:flex-end;">
              <a href="my-page.html" class="btn btn-light">취소</a>
              <button type="submit" class="btn btn-accent" id="saveProfileBtn">저장</button>
            </div>
          
            <hr style="border:0;border-top:1px solid var(--line);margin:16px 0">

            <div class="mb-12">
              <label for="currentPassword" class="form-label">
                현재 비밀번호 <span class="badge">필수</span>
              </label>
              <input
                id="currentPassword"
                type="password"
                class="form-control"
                placeholder="현재 비밀번호"
                autocomplete="current-password"
                required
              />
            </div>

            <div class="mb-12">
              <label for="newPassword" class="form-label">새 비밀번호</label>
              <input
                id="newPassword"
                type="password"
                class="form-control"
                placeholder="8자 이상"
                autocomplete="new-password"
              />
            </div>

            <div class="mb-16">
              <label for="newPasswordCheck" class="form-label">새 비밀번호 확인</label>
              <input
                id="newPasswordCheck"
                type="password"
                class="form-control"
                placeholder="다시 입력"
                autocomplete="new-password"
              />
              <div class="form-hint">
                비밀번호를 변경하지 않으려면 위 두 칸을 비워 두세요.
              </div>
            </div>
            <div class="actions" style="display:flex;gap:8px;justify-content:flex-end;">
              <a href="my-page.html" class="btn btn-light">취소</a>
              <button type="submit" class="btn btn-accent" id="savePasswordBtn">저장</button>
            </div>
          </form>

          <hr style="border:0;border-top:1px solid var(--line);margin:16px 0">

          <div class="danger-zone">
            <h2 class="h6 mb-8">회원 탈퇴</h2>
            <p class="text-muted mb-12">
              계정과 데이터가 삭제됩니다. 이 작업은 되돌릴 수 없습니다.
            </p>
            <button class="btn btn-danger" id="deleteBtn">회원 탈퇴</button>
          </div>

        </div>
      </div>
    </div>
  </main>

  <script type="module" src="./scripts/profile.js"></script>
</body>
</html>